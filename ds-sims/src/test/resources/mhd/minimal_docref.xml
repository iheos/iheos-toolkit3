<?xml version="1.0" encoding="UTF-8"?>

<!-- DocumentReference
    This is the absolute minimalistic coding of an MHD DocumentReference with
    requirements coming from both FHIR and XDS.
-->
<DocumentReference xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://hl7.org/fhir file:/Users/bmajur/Documents/HL7/FHIR/Schema/fhir-all-xsd/fhir-all.xsd"
                   xmlns="http://hl7.org/fhir">
    <!-- DocumentEntry.sourcePatientId and DocumentEntry.sourcePatientInfo
         coded as extension with a reference from the Patient resource representing
         the sourcePatient (information stored outside XDS environment on the patient -->
    <extension url="http://ihe.net/fhir/Profile/XDS/extensions#sourcePatient">
        <valueResource>
            <reference value="#sourcepatient"/>
        </valueResource>
    </extension>
    <extension url="http://ihe.net/fhir/Profile/XDS/extensions#practiceSettingCode">
        <valueCoding>
            <system value="coding scheme value"/>
            <code value="code value"/>
            <display value="display name"/>
        </valueCoding>
    </extension>
    <text>
        <status value="generated"/>
        <div xmlns="http://www.w3.org/1999/xhtml"/>
    </text>
    <contained>
        <!-- only detail is Patient ID 
             referenced by <subject/> DocumentEntry.patientId 
             this is the Affinity Domain patientID -->
        <Patient id="patient">
            <identifier>
                <system value="urn:oid:1.3.6.1.4.1.21367.2005.3.7"/>
                <value value="1234"/>
            </identifier>
        </Patient>
    </contained>
    <contained>
        <!-- this could contain the full sourcePatientInfo detail 
             referenced by <subject/> DocumentEntry.patientId 
             this is the Source patientID -->
        <Patient id="sourcepatient">
            <identifier>
                <value value="DTG1234"/>
                <system value="urn:oid:7.7.7"/>
            </identifier>
        </Patient>
    </contained>
    <contained>
        <!-- DocumentEntry.author.authorPerson -->
        <Practitioner id="docdave">
            <name>
                <family value="Careful"/>
                <given value="Dave"/>
                <prefix value="Dr"/>
            </name>
        </Practitioner>
    </contained>
    <!-- DocumentEntry.uniqueId -->
    <masterIdentifier>
        <system value="urn:ietf:rfc:3986"/>
        <value value="urn:oid:1.3.6.1.4.1.21367.2005.3.7"/>
    </masterIdentifier>
    <!-- DocumentEntry.patientId -->
    <subject>
        <reference value="#patient"/>
    </subject>
    <!-- DocumentEntry.typeCode -->
    <type>
        <coding>
            <system value="urn:oid:2.16.840.1.113883.6.1"/>
            <code value="28651-8"/>
            <display value="Nurse Transfer note"/>
        </coding>
    </type>
    <!-- DocumentEntry.classCode -->
    <class>
        <coding>
            <system value="urn:oid:1.3.6.1.4.1.21367.100.1"/>
            <code value="DEMO-Pt Mgmt"/>
            <display value="Patient Management"/>
        </coding>
    </class>
    <!-- DocumentEntry.author 
         this is required by FHIR and optional in XDS -->
    <author>
        <reference value="#docdave"/>
    </author>
    <!-- DocumentEntry.creationTime -->
    <created value="2005-12-24T09:35:00"/>
    <!-- required by FHIR - when was DocumentReference created -->
    <indexed value="2005-12-24T09:35:00"/>
    <!-- DocumentEntry.availabilityStatus (Approved) 
         FHIR requires this on submission -->
    <status value="current"/>
    <!-- DocumentEntry.confidentialityCode -->
    <confidentiality>
        <coding>
            <system value="urn:oid:2.16.840.1.113883.5.25"/>
            <code value="N"/>
            <display value="Normal"/>
        </coding>
    </confidentiality>
    <!-- DocumentEntry.languageCode -->
    <primaryLanguage value="en-US"/>
    <!-- DocumentEntry.mimeType -->
    <mimeType value="text/plain"/>
    <format value="urn:wustl:mir:ppoc:1999"/>
    <location value="#binary1"/>
    <!-- DocumentEntry.formatCode - 
         not a coded value like in XDS -->
    <context>
        <!-- DocumentEntry.healthcareFacilityTypeCode -->
        <facilityType>
            <coding>
                <system value="urn:oid:2.16.840.1.113883.5.11"/>
                <code value="PEDHO"/>
                <display value="Pediatric oncology clinic"/>
            </coding>
        </facilityType>
    </context>
</DocumentReference>
