<?xml version="1.0" encoding="UTF-8"?>

<!-- DocumentReference
    This example contains all the attributes defined by XDS.
-->
<DocumentReference xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://hl7.org/fhir file:/Users/bmajur/Documents/HL7/FHIR/Schema/fhir-all-xsd/fhir-all.xsd"
                   xmlns="http://hl7.org/fhir">
    <!-- DocumentEntry.sourcePatientId and DocumentEntry.sourcePatientInfo
         coded as extension with a reference from the Patient resource representing
         the sourcePatient (information stored outside XDS environment on the patient -->
    <extension url="http://ihe.net/fhir/Profile/XDS/extensions#sourcePatient">
        <valueResource>
            <reference value="#sourcepatient"/>
        </valueResource>
    </extension>
    <!-- Comments-->
    <extension url="http://ihe.net/fhir/Profile/XDS/extensions#comments">
        <valueString value="Text of the comment"/>
    </extension>
    <!--  homeCommunityId   -->
    <extension url="http://ihe.net/fhir/Profile/XDS/extensions#homeCommunityId">
        <valueString value="urn:oid:1.2.334483.3.337395864.7"/>
    </extension>
    <extension url="http://ihe.net/fhir/Profile/XDS/extensions#practiceSettingCode">
        <valueCoding>
            <system value="coding scheme value"/>
            <code value="code value"/>
            <display value="display name"/>
        </valueCoding>
    </extension>
    <text>
        <status value="generated"/>
        <div xmlns="http://www.w3.org/1999/xhtml"/>
    </text>
    <contained>
        <!-- only detail is Patient ID 
             referenced by <subject/> DocumentEntry.patientId 
             this is the Affinity Domain patientID -->
        <Patient id="patient">
            <identifier>
                <system value="urn:oid:1.3.6.1.4.1.21367.2005.3.7"/>
                <value value="1234"/>
            </identifier>
        </Patient>
    </contained>
    <contained>
        <!-- this could contain the full sourcePatientInfo detail 
             referenced by <subject/> DocumentEntry.patientId 
             this is the Source patientID -->
        <Patient id="sourcepatient">
            <identifier>
                <system value="urn:oid:7.7.7"/>
                <value value="DTG1234"/>
            </identifier>
            <name>
                <family value="Brown"/>
                <given value="Charlie"/>
            </name>
            <gender>
                <coding>
                    <code value="M"> </code>
                </coding>
            </gender>
            <birthDate value="1951-08-24T09:35:00"/>
            <address>
                <line value="100 Main St"/>
                <city value="Burlington"/>
                <state value="MA"/>
                <zip value="01803"/>
                <country value="USA"/>
            </address>
        </Patient>
    </contained>
    <contained>
        <!-- DocumentEntry.author.authorPerson -->
        <Practitioner id="docdave">
            <name>
                <family value="Careful"/>
                <given value="Dave"/>
                <prefix value="Dr"/>
            </name>
        </Practitioner>
    </contained>
    <contained>
        <!-- DocumentEntry.legalAuthenticator
            V2 XCN encoding equivalent is 
            ^Welby^Marcus^^^Dr^MD
            -->
        <Practitioner id="auth1">
            <name>
                <family value="Welby"/>
                <given value="Marcus"/>
                <prefix value="Dr"/>
            </name>
        </Practitioner>
    </contained>
    <!-- DocumentEntry.uniqueId -->
    <masterIdentifier>
        <system value="urn:ietf:rfc:3986"/>
        <value value="urn:oid:1.3.6.1.4.1.21367.2005.3.7"/>
    </masterIdentifier>
    <!-- DocumentEntry.patientId -->
    <subject>
        <reference value="#patient"/>
    </subject>
    <!-- DocumentEntry.typeCode -->
    <type>
        <coding>
            <system value="urn:oid:2.16.840.1.113883.6.1"/>
            <code value="28651-8"/>
            <display value="Nurse Transfer note"/>
        </coding>
    </type>
    <!-- DocumentEntry.classCode -->
    <class>
        <coding>
            <system value="urn:oid:1.3.6.1.4.1.21367.100.1"/>
            <code value="DEMO-Pt Mgmt"/>
            <display value="Patient Management"/>
        </coding>
    </class>
    <!-- DocumentEntry.author 
         this is required by FHIR and optional in XDS -->
    <author>
        <reference value="#docdave"/>
    </author>
    <!-- DocumentEntry.legalAuthenticator -->
    <authenticator>
        <reference value="#auth1"/>
    </authenticator>
    <!-- DocumentEntry.creationTime -->
    <created value="2005-12-24T09:35:00"/>
    <!-- required by FHIR - when was DocumentReference created -->
    <indexed value="2005-12-24T09:35:00"/>
    <!-- DocumentEntry.availabilityStatus (Approved) 
         FHIR requires this on submission -->
    <status value="current"/>
    <!-- This is both DocumentEntry.title and DocumentReference.description -->
    <description value="My first DocumentReference"/>
    <!-- DocumentEntry.confidentialityCode -->
    <confidentiality>
        <coding>
            <system value="urn:oid:2.16.840.1.113883.5.25"/>
            <code value="N"/>
            <display value="Normal"/>
        </coding>
    </confidentiality>
    <!-- DocumentEntry.languageCode -->
    <primaryLanguage value="en-US"/>
    <!-- DocumentEntry.mimeType -->
    <mimeType value="text/plain"/>
    <format value="urn:wustl:mir:ppoc:1999"/>
    <size value="12301"/>
    <hash value="e543712c0e10501972de13a5bfcbe826c49feb75"/>
    <location value="#binary1"/>
    <!-- DocumentEntry.formatCode - e543712c0e10501972de13a5bfcbe826c49feb75
         not a coded value like in XDS -->
    <context>
        <event>
            <coding>
                <system value="http://ihe.net/xds/connectathon/eventCodes"/>
                <code value="T-D8200"/>
                <display value="Arm"/>
            </coding>
        </event>
        <!-- serviceStartTime and serviceStopTime -->
        <period>
            <start value="2004-12-23T08:00:00"/>
            <end value="2004-12-23T08:01:00"/>
        </period>
        <!-- DocumentEntry.healthcareFacilityTypeCode -->
        <facilityType>
            <coding>
                <system value="urn:oid:2.16.840.1.113883.5.11"/>
                <code value="PEDHO"/>
                <display value="Pediatric oncology clinic"/>
            </coding>
        </facilityType>
    </context>
</DocumentReference>
